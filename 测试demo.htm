<!DOCTYPE html>
<!-- saved from url=(0079)http://192.168.181.247:8080/actionmanage/loupanMap.action?huodong.huodongId=410 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>测试demo</title>
<link rel="stylesheet" href="files/main.css" type="text/css">
<link rel="stylesheet" href="files/style.css" type="text/css">
<link rel="stylesheet" type="text/css" href="files/jscal2.css">
<link rel="stylesheet" type="text/css" href="files/border-radius.css">
<link rel="stylesheet" type="text/css" href="files/steel.css">
<link rel="stylesheet" type="text/css" href="files/jquery.autocomplete.css">

<script type="text/javascript" src="files/jquery-1.4.2.js"></script>
<script type="text/javascript" src="files/jquery.cookie.js"></script>
<script type="text/javascript" src="files/jquery.validate.js"></script>
<script type="text/javascript" src="files/jquery.autocomplete.js"></script>



<style type="text/css">
#allmap {
	width: 800px;
	height: 600px;
	overflow: hidden;
	margin: 0;
}

#l-map {
	height: 100%;
	width: 78%;
	float: left;
	border-right: 2px solid #bcbcbc;
}

#r-result {
	height: 100%;
	width: 20%;
	float: left;
}

.i_B {
	background: url("http://pages.aifcdn.com/img/afmap/8/m.gif") no-repeat
		scroll 0 0 transparent;
	*background: none;
	*filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://pages.aifcdn.com/img/jmap/4/ol_2.png",
		sizingMethod='crop' );
	display: inline-block;
	color: #FFFFFF;
	font-size: 12px;
	font-weight: 700;
	line-height: 23px;
	padding: 0 0 0 10px;
	text-align: center;
	white-space: nowrap;
	vertical-align: middle;
	height: 30px;
}

.i_S_r {
	vertical-align: middle;
	display: inline-block;
	height: 30px;
	width: 12px;
	line-height: 23px;
	background: url("http://pages.aifcdn.com/img/afmap/8/m.gif") no-repeat 0
		-61px;
}

.i_S_r.blue_bg {
	background: url("blue_bg.png") no-repeat 0 -28px;
}

.i_B.blue_bg {
	background: url("blue_bg.png") no-repeat 0 2px;
}

.i_B.act {
	background: url("http://pages.aifcdn.com/img/jmap/4/ol_2.png") no-repeat
		scroll left 0 transparent;
	*background: none;
	*filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://pages.aifcdn.com/img/jmap/4/ol_2.png",
		sizingMethod='crop' );
}

.m_pop {
	background:
		url("http://pages.lunjiang.dev.aifcdn.com/img/jmap/4/bg_1.png")
		no-repeat scroll 0 0 transparent;
	*background: none;
	*filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://pages.lunjiang.dev.aifcdn.com/img/jmap/4/bg_1.png",
		sizingMethod='crop' );
	cursor: default;
	height: 232px;
	width: 405px;
}

.m_content {
	height: 232px;
	overflow: hidden;
	position: relative;
	width: 405px;
}

.m_close {
	position: absolute;
	width: 10px;
	height: 10px;
	top: 23px;
	right: 40px;
	cursor: pointer;
	background:
		url("http://pages.lunjiang.dev.aifcdn.com/img/jmap/4/bg_1.png")
		no-repeat -136px -336px;
	overflow: hidden;
	z-index: 102;
	z-index: 102 !important;
}

.m_img:link,.m_img:visited,.m_img:hover {
	background:
		url("http://pages.lunjiang.dev.aifcdn.com/img/jmap/4/bg_1.png")
		no-repeat scroll 0 -248px transparent;
	*background: none;
	*filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://pages.lunjiang.dev.aifcdn.com/img/jmap/4/bg_1.png",
		sizingMethod='crop' );
	height: 105px;
	overflow: hidden;
	position: absolute;
	right: 40px;
	top: 64px;
	width: 126px;
}

.m_img .m_a_img {
	margin: 2px;
	width: 122px;
	height: 94px;
	overflow: hidden;
	border: none;
	padding: 0;
}

.m_box {
	font-size: 13px;
	height: 155px;
	margin: 29px 0 0 37px;
	width: 190px;
}

dl,dt,dd {
	margin: 0;
	padding: 0;
}

.dt_001 {
	height: 40px;
	overflow: hidden;
}

.dd_002,.dd_003 {
	margin-bottom: 3px;
}

.dd_004 {
	margin: 9px 0 18px;
}

.dd_003,.dd_004,.dd_006 {
	height: 16px;
	overflow: hidden;
}

.m_detail:link,.m_detail:visited,.m_detail:hover {
	display: block;
	background:
		url("http://pages.lunjiang.dev.aifcdn.com/img/jmap/4/bg_2.png")
		no-repeat 0 0;
	width: 132px;
	height: 25px;
	line-height: 25px;
	text-align: center;
	overflow: hidden;
	text-decoration: none;
	color: #fff;
	font-size: 14px;
	font-weight: 700;
}

.i_type {
	background-position: -136px -240px;
	margin: 0 17px 0 0;
	padding: 0 0 0 19px;
}

.i_con {
	background: url("http://pages.aifcdn.com/img/jmap/4/bg_1.png") no-repeat
		scroll -136px -240px #FFFFFF;
	color: #888888;
	display: inline-block;
	height: 15px;
	overflow: hidden;
	width: auto;
}

.tip_content {
	position: absolute;
}
</style>




</head>
    <body>

        <div class="container">
            <!-- header begin -->
            <div class="header">
                <div class="logo">
                    <img alt="" src="files/msc_logo.png" width="444px" height="45px">
                    <a href="http://192.168.181.247:8080/logout.action" class="a_exit">退出</a>
                     
                    <div class="clear"></div>
                </div>
                <div class="blank"></div>
            </div>
            <!-- header end -->


            <!-- content begin -->
            <div class="content con_list">
                <dl class="equal nav_l">

                        
                        
                            <dt>
                            <span>欢迎进入系统</span><br>
                            徐新龙
                        
                    </dt>
                    
                        <dd class="dd_active"><a class="dd_a dd_hd" href="http://192.168.181.247:8080/actionmanage/list.action">活动管理</a></dd>
                    
                    
                    <dd><a class="dd_a dd_rw" href="http://192.168.181.247:8080/taskmanage/allotList.action">任务管理</a></dd>
                    <dd><a class="dd_a dd_zj" href="http://192.168.181.247:8080/tsrmanage/report.action">绩效与质检</a></dd>
                    
                    
                    <dd><a class="dd_a dd_hj" href="http://192.168.181.247:8080/mytask/taskList.action">待呼叫任务</a></dd>
                    <dd><a class="dd_a dd_gj" href="http://192.168.181.247:8080/mycustomer/list.action">需跟进用户</a></dd>
                    
                    
                    
                </dl>
                <div class="equal con_r con_task">
                    
	<div id="allmap" style="overflow: hidden; position: relative; z-index: 0; background-color: rgb(243, 241, 236); color: rgb(0, 0, 0); text-align: left;">
    <div style="overflow: visible; position: absolute; z-index: 0; left: 0px; top: 0px; cursor: url(http://api.map.baidu.com/images/openhand.cur) 8 8, default;">
        <div class="BMap_mask" style="position: absolute; left: 0px; top: 0px; z-index: 9; overflow: hidden; -webkit-user-select: none; width: 849px; height: 0px;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 200;"><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 800;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 700;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 600;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 500;"><div class="tip_content" style="z-index: 0; -webkit-user-select: none; left: 266px; top: 29px;"><div style="white-space: nowrap; position: relative;"><span class="i_B">克克克克克克</span><span class="i_S_r">&nbsp;</span></div></div><div class="tip_content" style="z-index: 0; -webkit-user-select: none; left: 356px; top: 95px;"><div style="white-space: nowrap; position: relative;"><span class="i_B blue_bg">尼尼尼尼尼</span><span class="i_S_r blue_bg">&nbsp;</span></div></div><div class="tip_content" style="z-index: 0; -webkit-user-select: none; left: 583px; top: 78px;"><div style="white-space: nowrap; position: relative;"><span class="i_B blue_bg">尼尼</span><span class="i_S_r blue_bg">&nbsp;</span></div></div><div class="tip_content" style="z-index: 0; -webkit-user-select: none; left: 214px; top: -134px;"><div style="white-space: nowrap; position: relative;"><span class="i_B blue_bg">曼曼曼</span><span class="i_S_r blue_bg">&nbsp;</span></div></div><div class="tip_content" style="z-index: 0; -webkit-user-select: none; left: -88px; top: 85px;"><div style="white-space: nowrap; position: relative;"><span class="i_B blue_bg">狂狂狂狂狂狂狂狂狂狂狂狂狂狂狂狂狂狂</span><span class="i_S_r blue_bg">&nbsp;</span></div></div><label class="BMapLabel" unselectable="on" style="position: absolute; display: inline; cursor: inherit; background-color: rgb(255, 255, 255); border: 1px solid rgb(255, 0, 0); padding: 1px; white-space: nowrap; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-family: arial, sans-serif; z-index: 0; left: 341px; top: 82px;">相距685米</label><label class="BMapLabel" unselectable="on" style="position: absolute; display: inline; cursor: inherit; background-color: rgb(255, 255, 255); border: 1px solid rgb(255, 0, 0); padding: 1px; white-space: nowrap; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-family: arial, sans-serif; z-index: 0; left: 455px; top: 73px;">相距1966米</label><label class="BMapLabel" unselectable="on" style="position: absolute; display: inline; cursor: inherit; background-color: rgb(255, 255, 255); border: 1px solid rgb(255, 0, 0); padding: 1px; white-space: nowrap; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-family: arial, sans-serif; z-index: 0; left: 270px; top: -32px;">相距1051米</label><label class="BMapLabel" unselectable="on" style="position: absolute; display: inline; cursor: inherit; background-color: rgb(255, 255, 255); border: 1px solid rgb(255, 0, 0); padding: 1px; white-space: nowrap; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-family: arial, sans-serif; z-index: 0; left: 119px; top: 77px;">相距2197米</label></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 400;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 300;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 201;"></div><div style="position: absolute; height: 0px; width: 0px; left: 0px; top: 0px; z-index: 200;"><svg version="1.1" type="system" style="position: absolute; top: -500px; left: -500px; width: 1849px; height: 1000px;" x="1849px" y="1000px" viewBox="-500 -500 1849 1000"><path stroke-linejoin="round" stroke-linecap="round" fill-rule="evenodd" style="cursor: pointer; -webkit-user-select: none;" fill="none" stroke="red" stroke-width="4" stroke-dasharray="none" stroke-opacity="0.5" d="M 296 59 L 386 125"></path><path stroke-linejoin="round" stroke-linecap="round" fill-rule="evenodd" style="cursor: pointer; -webkit-user-select: none;" fill="none" stroke="red" stroke-width="4" stroke-dasharray="none" stroke-opacity="0.5" d="M 296 59 L 613 108"></path><path stroke-linejoin="round" stroke-linecap="round" fill-rule="evenodd" style="cursor: pointer; -webkit-user-select: none;" fill="none" stroke="red" stroke-width="4" stroke-dasharray="none" stroke-opacity="0.5" d="M 296 59 L 244 -104"></path><path stroke-linejoin="round" stroke-linecap="round" fill-rule="evenodd" style="cursor: pointer; -webkit-user-select: none;" fill="none" stroke="red" stroke-width="4" stroke-dasharray="none" stroke-opacity="0.5" d="M 296 59 L -58 115"></path></svg></div></div><div style="position: absolute; overflow: visible; top: 0px; left: 0px; z-index: 1;"><div style="position: absolute; overflow: visible; z-index: -100; left: 425px; top: 0px;"><img style="position: absolute; border: none; width: 256px; height: 256px; left: -316px; top: -152px; max-width: none; opacity: 1;" src="files/u=x=6326;y=2356;z=15;v=015"><img style="position: absolute; border: none; width: 256px; height: 256px; left: -60px; top: -152px; max-width: none; opacity: 1;" src="files/u=x=6327;y=2356;z=15;v=015"><img style="position: absolute; border: none; width: 256px; height: 256px; left: 196px; top: -152px; max-width: none; opacity: 1;" src="files/u=x=6328;y=2356;z=15;v=015"><img style="position: absolute; border: none; width: 256px; height: 256px; left: -572px; top: -152px; max-width: none; opacity: 1;" src="files/u=x=6325;y=2356;z=15;v=015"></div></div><div style="position: absolute; overflow: visible; top: 0px; left: 0px; z-index: 2;"></div></div><div style="height: 32px; position: absolute; z-index: 10; -webkit-text-size-adjust: none; bottom: 0px; right: auto; top: auto; left: 1px; display: none;" class=" anchorBL"><a title="到百度地图查看此区域" target="_blank" href="http://map.baidu.com/?sr=1" style="outline: none;"><img style="border:none;width:77px;height:32px" src="files/copyright_logo.png"></a></div><div id="zoomer" style="position:absolute;z-index:0;top:0px;left:0px;overflow:hidden;visibility:hidden;cursor:url(http://api.map.baidu.com/images/openhand.cur) 8 8,default"><div class="BMap_zoomer" style="top:0;left:0;"></div><div class="BMap_zoomer" style="top:0;right:0;"></div><div class="BMap_zoomer" style="bottom:0;left:0;"></div><div class="BMap_zoomer" style="bottom:0;right:0;"></div></div><div unselectable="on" class=" BMap_stdMpCtrl BMap_stdMpType0 BMap_noprint anchorTL" style="width: 62px; height: 192px; bottom: auto; right: auto; top: 10px; left: 10px; position: absolute; z-index: 1100; -webkit-text-size-adjust: none;"><div class="BMap_stdMpPan"><div class="BMap_button BMap_panN" title="向上平移"></div><div class="BMap_button BMap_panW" title="向左平移"></div><div class="BMap_button BMap_panE" title="向右平移"></div><div class="BMap_button BMap_panS" title="向下平移"></div><div class="BMap_stdMpPanBg BMap_smcbg"></div></div><div class="BMap_stdMpZoom" style="height: 147px; width: 62px;"><div class="BMap_button BMap_stdMpZoomIn" title="放大一级" style=""><div class="BMap_smcbg"></div></div><div class="BMap_button BMap_stdMpZoomOut" title="缩小一级" style="top: 126px;"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSlider" style="height: 108px;"><div class="BMap_stdMpSliderBgTop" style="height: 108px;"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderBgBot" style="top: 25px; height: 87px;"></div><div class="BMap_stdMpSliderMask" title="放置到此级别"></div><div class="BMap_stdMpSliderBar" title="拖动缩放" style="cursor: url(http://api.map.baidu.com/images/openhand.cur) 8 8, default; top: 25px;"><div class="BMap_smcbg"></div></div></div><div class="BMap_zlHolder"><div class="BMap_zlSt"><div class="BMap_smcbg"></div></div><div class="BMap_zlCity"><div class="BMap_smcbg"></div></div><div class="BMap_zlProv"><div class="BMap_smcbg"></div></div><div class="BMap_zlCountry"><div class="BMap_smcbg"></div></div></div></div></div><div unselectable="on" class=" BMap_cpyCtrl BMap_noprint anchorBL" style="cursor: default; white-space: nowrap; color: black; background-image: none; font-style: normal; font-variant: normal; font-weight: normal; font-size: 11px; line-height: 15px; font-family: arial, sans-serif; bottom: 2px; right: auto; top: auto; left: 4px; position: absolute; z-index: 10; -webkit-text-size-adjust: none; background-position: initial initial; background-repeat: initial initial;"><span _cid="1"><span style="font-size:11px">© 2013 Baidu&nbsp;- Data © <a target="_blank" href="http://www.navinfo.com/">NavInfo</a> &amp; <a target="_blank" href="http://www.cennavi.com.cn/">CenNavi</a> &amp; <a target="_blank" href="http://www.365ditu.com/">道道通</a></span></span></div></div>
<script type="text/javascript" src="files/api"></script><link rel="stylesheet" type="text/css" href="files/bmap.css"><script type="text/javascript" src="files/getscript"></script>

<script type="text/javascript">
    var J ={};
    var DialogMark = {};
    var targetDialog = null;
    var showDialogTarget = null;//已经打开的对像
    var redBackgroundTarget  = null;//忆点击的红色背景
    var lineDataSource = []; //测距直线
    var labelDataSource = [];
    (function(J){
        var defaultOpts ={
            point:null
        };
        function Mark(options){
            this.point = options.point;
            this.text = options.text || '未初始text';
            this.html = options.html || '未初始化html';
            this.main = options.main || false;
        }

        Mark.prototype = new BMap.Overlay();
        Mark.prototype.initialize = function(map){
            this._map = map;
            var div = this._div = document.createElement("div");
            div.className="tip_content";
            div.style.zIndex = BMap.Overlay.getZIndex(this.y);
            div.style.MozUserSelect = "none";

            var relativeDiv = document.createElement("div");
            relativeDiv.style.whiteSpace="nowrap";
            relativeDiv.style.position="relative";
            var span = this._span = document.createElement("span");
            span.className=this.main ? "i_B":"i_B blue_bg";
            var rspan= document.createElement("span");
            rspan.className=this.main ? "i_S_r" :"i_S_r blue_bg";


            (span.innerText !== undefined && (span.innerText = this.text)) || (span.textContent!==undefined && (span.textContent = this.text));
            rspan.innerHTML="&nbsp;";
            relativeDiv.appendChild(span);
            relativeDiv.appendChild(rspan);
            div.appendChild(relativeDiv);
            div.onmouseover = function(){
              //  this.getElementsByTagName("span")[0].className="i_B act";
            }
            div.onmouseout = function(){
//                this.getElementsByTagName("span")[0].className="i_B";
            }

            map.getPanes().labelPane.appendChild(div);

            (function(point,html,contentTarget){
                var point = point;
                var html = html;
                div.onclick = function(){
                    //to change the background,so ,cache the target.
                    if(redBackgroundTarget != this){
                        //redBackgroundTarget && (redBackgroundTarget.getElementsByTagName("span")[0].style.background= "");
                        //this.getElementsByTagName("span")[0].style.background="url(http://pages.aifcdn.com/img/jmap/4/ol_2_h.png) no-repeat scroll left 0 transparent";
                        redBackgroundTarget = this;
                        //drawoline

                            <!--begain移除已经画的线-->
//                            if(lineDataSource.length >0){
//                                for(var i= 0;i<lineDataSource.length;i++){
//                                    map.removeOverlay(lineDataSource[i]);
//                                    map.removeOverlay(labelDataSource[i]);
//                                }
//                            }
                            <!--end 移除已经画的线-->
//                            var i = 0;
//                            for(;i<pointDataSource.length;i++){
//                                if(pointDataSource[i].point!= point){
//                                    map.getDistance(point,pointDataSource[i].point);
//                                    var polyline = new BMap.Polyline([point,pointDataSource[i].point], {strokeColor:"red", strokeWeight:4, strokeOpacity:0.5});  //定义折线
//                                    map.addOverlay(polyline);   //添加折线到地图上
//                                    lineDataSource.push(polyline);
//                                    var label = createLabel(point,pointDataSource[i].point);
//                                    labelDataSource.push(label);
//                                    map.addOverlay(label);
//                                }
//                            }
                        //创建label
                    }
                    //下面是画ｄｉａｌｏｇ
                    var keyPoint = ""+ point.lng+ point.lat;
                    if(!DialogMark[keyPoint]){
                        showDialogTarget &&showDialogTarget.hide();
                        var width =(document.defaultView.getComputedStyle(contentTarget,null).width) || (contentTarget.currentStyle.width);
                        var dialog = new J.Dialog({point:point,html:html,width:width});
                        map.addOverlay(dialog);
                        DialogMark[keyPoint] = dialog;
                        showDialogTarget = dialog;
                        return;
                    }
                    if(DialogMark[keyPoint].isVisible()){
                        return;
                    }
                    showDialogTarget &&showDialogTarget.hide();
                    DialogMark[keyPoint].show();
                    showDialogTarget = DialogMark[keyPoint];
                }
            })(this.point,this.html,this._div);//rspan计算偏移对像要用到
            return div;
        }

        Mark.prototype.draw = function(){
            var map  = this._map;
            var pixel = map.pointToOverlayPixel(this.point);
            this._div.style.left = pixel.x-30 +"px";
            this._div.style.top = pixel.y-30  + "px";
        }
        J.Mark = Mark;
    })(J);


    (function(J){
        var defaultOpts ={
            point:null
        };
        function Dialog(options){
            this.point = options.point || defaultOpts.point;
            this.html = options.html || '填充代码';
            this._offsetLeft = options.width;
        }
        Dialog.prototype = new BMap.Overlay();
        Dialog.prototype.initialize = function(map){
            this._map = map;
            var div = this._div = document.createElement("div");
            div.style.position = "absolute";
            div.style.zIndex = BMap.Overlay.getZIndex(this.y);
            div.style.MozUserSelect = "none";
            div.innerHTML= this.html;
            map.getPanes().labelPane.appendChild(div);
            //为关闭按扭绑定事件
            var obj = selectorByClassName(div,"m_close")
            obj.onclick= function(){
                showDialogTarget && (showDialogTarget.hide());
            }
            return div;
        }
        function selectorByClassName(root,classname){
            if(root.nodeType != 1){
                return false;
            }
            var nodes = root.childNodes;
            for(var i= 0,len=nodes.length;i<len;i++){
                var node = nodes[i];
                if(node.nodeType != 1){
                    continue;
                }
                var names = node.className.split(/\s+/g);
                for(var j= 0,slen=names.length;j<slen;j++){
                    if(names[j] == classname) {
                        return node;
                    }
                }
                if(node.hasChildNodes()){
                   var result = selectorByClassName(node,classname);//
                    if(result){
                        return result;
                    }
                }
            }
            return false;
        }
        Dialog.prototype.draw = function(){
            var map  = this._map;
            var pixel = map.pointToOverlayPixel(this.point);
            var left = this._offsetLeft.replace("px",'');
            left = parseInt(left);

            this._div.style.left = pixel.x+left-35 +"px";
            this._div.style.top = pixel.y-105  + "px";
        }
        //关闭事件
        J.Dialog = Dialog;
    })(J);
    </script>





<script type="text/javascript">
    var map = new BMap.Map("allmap");            // 创建Map实例
    map.addControl(new BMap.NavigationControl());  //添加默认缩放平移控件
    var point = new BMap.Point(116.404, 39.915);    // 创建点坐标
    var num = 0;
    map.centerAndZoom(point,15);                     // 初始化地图,设置中心点坐标和地图级别。
    dataSource = new BMap.Point(116.394801,39.911735 );

    var pointDataSource = [];
    var html = '<div class="m_pop"><div class="m_content"><a target="_blank" class="m_img" href="http://aifang.com/loupan/218157.html?from=map_loupanlist"><img height="94" width="122" src="http://pic1.ajkimg.com/display/xfang/9d57805e4ceb8976564bcdbcc1027998/133x100.jpg" class="m_a_img"></a><dl class="m_box">    <dt class="dt_001"><b><a class="m_cname" target="_blank" href="/loupan/218157.html?from=map_loupanlist">香梅王座</a></b><i class="icon_sw">&nbsp;</i></dt>    <dd class="dd_002">价格：<span>75000</span>元/平米</dd>    <dd class="dd_003">地址：<span>浦东&nbsp;&nbsp;锦康路3891弄</span></dd>    <dd class="dd_004">        <i class="i_con i_type">高层</i>        <i class="i_con i_buil">精装修</i></dd>    <dd class="dd_005"><a target="_blank" class="m_detail" href="/loupan/218157.html?from=map_loupanlist">查看详情&nbsp;&gt;&gt;</a></dd></dl></div><div id="m_close" class="m_close"></div></div>';
    var html1 = '<div class="m_pop"><div class="m_content"><a target="_blank" class="m_img" href="http://aifang.com/loupan/218157.html?from=map_loupanlist"><img height="94" width="122" src="http://pic1.ajkimg.com/display/xfang/9d57805e4ceb8976564bcdbcc1027998/133x100.jpg" class="m_a_img"></a><dl class="m_box">    <dt class="dt_001"><b><a class="m_cname" target="_blank" href="/loupan/218157.html?from=map_loupanlist">香梅王座</a></b><i class="icon_sw">&nbsp;</i></dt>    <dd class="dd_002">价格1：<span>75000</span>元/平米</dd>    <dd class="dd_003">地址：<span>浦东&nbsp;&nbsp;锦康路3891弄</span></dd>    <dd class="dd_004">        <i class="i_con i_type">高层</i>        <i class="i_con i_buil">精装修</i></dd>    <dd class="dd_005"><a target="_blank" class="m_detail" href="/loupan/218157.html?from=map_loupanlist">查看详情&nbsp;&gt;&gt;</a></dd></dl></div><div id="m_close" class="m_close"></div></div>';
    var markDataArray=[];//保存初始的每个标签数组，方便计算出每个小标签的宽度
    pointDataSource.push({point:(new BMap.Point(116.394801,39.911735)),text:'克克克克克克',html:html,main:true});
    pointDataSource.push({point:(new BMap.Point(116.401269,39.908082)),text:'尼尼尼尼尼',html:html1});
    pointDataSource.push({point:(new BMap.Point(116.417582,39.909023)),text:'尼尼',html:html});
    pointDataSource.push({point:(new BMap.Point(116.391064,39.920745 )),text:'曼曼曼',html:html});
    pointDataSource.push({point:(new BMap.Point(116.369361,39.908636 )),text:'狂狂狂狂狂狂狂狂狂狂狂狂狂狂狂狂狂狂',html:html});
    map.enableScrollWheelZoom();                            //启用滚轮放大缩小

    for (var i = 0,len= pointDataSource.length;i<len;i++){
        var mark = new J.Mark(pointDataSource[i]);
        map.addOverlay(mark);
    }
    var point = pointDataSource[0].point;
    for(var i = 0;i<pointDataSource.length;i++){
        if(pointDataSource[i].point!= point){
            map.getDistance(point,pointDataSource[i].point);
            var polyline = new BMap.Polyline([point,pointDataSource[i].point], {strokeColor:"red", strokeWeight:4, strokeOpacity:0.5});  //定义折线
            map.addOverlay(polyline);   //添加折线到地图上
            lineDataSource.push(polyline);
            var label = createLabel(point,pointDataSource[i].point);
            labelDataSource.push(label);
            map.addOverlay(label);
        }
    }
    function createLabel(startPoint,endPoint){
        var x = Math.min(startPoint.lng,endPoint.lng)+Math.abs(startPoint.lng-endPoint.lng)/2;
        var y = Math.min(endPoint.lat,startPoint.lat)+Math.abs(startPoint.lat-endPoint.lat)/2;
        var point = new BMap.Point(x,y);
        var lenght = map.getDistance(startPoint,endPoint);
        var text = "相距"+parseInt(lenght)+"米";
        var label = new BMap.Label(text,{position:point,offset:new BMap.Size(0,-10)});
       label.setZIndex(0);
        return label;
    }
    /**
     *＠param map 必须
     * @param data {point:new new BMap.Point(116.394801,39.911735),}
     * point 坐标
     * id 方源ｉｄ
     * name 楼盘名
     * price 价格
     * address 地址
     * url 链接地址
     * fitment 装修情况
     * housetype 高层
     * @constructor
     */
</script>

	
                </div>
                <div class="clear"></div>
            </div>
        </div>

    
</body></html>